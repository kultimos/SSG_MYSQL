redo log是事务持久性的保证,undo log是事务原子性的保证,在事务中更新数据的前置操作其实是要先写入一个undo log

1.undo log的作用
    - 回滚数据
        undo log通过记录逆操作的方式可以在异常情况下将事务回滚,恢复数据到初始状态,但需要注意,所有的修改只是被逻辑地取消,但是数据结构和页半身在回滚之后可能
      有所不同,比如我们想插入一条数据,但此时当前页刚好满了,需要额外申请一个页,那么这种回滚了以后实际上只是根据undo log将该记录删除,但是这个页已经申请了,
      并不会把页也给销毁;
    - MVCC
        undo的另一个作用是MVCC,即在InnoDB存储引擎中MVCC的实现是通过undo来完成的,当用户读取完一行记录时,若该记录已经被其他事务占用,当前事务可以通过undo
      读取之前的行版本信息,以此实现非锁定读取; 该部分后面在MVCC处详细介绍

2.回滚段中的数据分类
    - 未提交的回滚数据
    - 已经提交但未过期的回滚数据
    - 事务已经提交并过期的

3.InnoDB行格式中的三个隐藏列
    - DB_ROW_ID: 如果没有为表显式的定义主键,并且表中也没有定义唯一索引,那么InnoDB会自动为表添加一个row_id的隐藏列作为主键;
    - DB_TRX_ID: 每个事务都会分配一个事务ID,当对某条记录发生变更时,就会将这个事务的事务ID写入trx_id中;
    - DB_ROLL_PTR: 回滚指针,本质上就是指向undo log的指针;

4.具体的undo log生成过程见PDF [](/pdf/第14章_MySQL事务日志.pdf)