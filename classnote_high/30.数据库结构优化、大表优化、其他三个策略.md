数据库结构优化

1.拆分表: 冷热数据分离
    拆分表的思路是,把一个包含很多字段的表拆分成2个或者多个相对较小的表;这样做的原因是,这些表中某些字段的操作频率很高(热数据),经常要进行查询或者更新操作,
  而另外一些字段的使用频率却很低(冷数据),冷热数据分离,可以减少表的宽度;如果放在一个表里面,每次查询都要读取大记录,会消耗较多的资源;
    Mysql限制每个表最多存储4096列,并且每一行数据的大小不能超过65535字节,表越宽,把表装载进内存缓冲池时占用的内存也就越大,也会消耗更多的IO;
    冷热数据分离的目的是:减少磁盘IO,保证热数据的内存缓存命中率;更有效的利用缓存,避免读入无用的冷数据;
    个人解读:因为数据库实际上并不知道我们要什么,所以会把表中所有的数据都先通过一次IO加载进内存,然后在内存中进行查询,而实际上可能有很大一部分的冷数据即使加载
           进内存我们也完全不会查询和使用,那其实这一部分数据在从磁盘加载到内存中消耗的IO就是浪费了,冷热数据一分离,我们只查热数据的时候就只会把热数据加载进
           内存,这样就减少了磁盘IO;

2.增加中间表
    对于需要经常联合查询的表,可以建立中间表以提高查询效率;通过建立中间表,把需要经常联合查询的数据插入中间表中,然后将原来的联合查询改为对中间表的查询,以此来提高效率;

3.增加冗余字段
4.优化数据类型
    优先选择符合存储需要的最小的数据类型
    - 对整数类型类型数据进行优化
        对非负数型的数据,优先使用unsigned来存储;比如bigint unsigned、int unsigned,因为无符号相对于有符号,同样的字节数,存储的数值范围更大,
      比如tinyint,有符号是-128~127,无符号是0~255,相当于多出了一倍的存储空间
    - 既可以使用文本类型也可以使用整数类型的字段,要使用整数类型,因为相比于文本类型,大整数往往占用更少的存储空间
    - 避免使用TEXT、BLOB数据类型
        Mysql内存临时表不支持TEXT、BLOB这样的大数据类型,如果查询中包含这样的数据,在排序等操作时,就不能使用内存临时表,必须使用磁盘临时表进行;并且对于这种数据,
      Mysql还是会进行二次查询,会使SQL性能变得很差,总结就是可以用,但不建议
    - 避免使用ENUM类型
        修改ENUM值非常麻烦,首先,使用ALTER TABLE语句修改"enum_type"字段的定义,将"bucks"添加为允许的枚举值：
        然后再执行update语句来更新数据 UPDATE tb_test SET enum_type = 'bucks' WHERE enum_type = 'lakers';
        通常在开发中我们使用tinyint来替代ENUM类型;
    - 使用Timestamp存储时间
        timestamp使用4个字节,datetime使用8个字节,同时timestamp具有自动赋值以及自动更新的特性,不过我在实际开发中并没有发现这个自动特性会被经常性使用,主要考虑
      可能还是有一些更新,开发人员并不希望会更改updateTime,比如我在测试的时候,我虽然修改了表数据,但是我只是测试,我可能之后还会恢复数据,我并不希望updatetime被更新;
      但是实际开发中确实会使用timestamp而不是datetime;
    - 使用DECIMAL代替FLOAT和DOUBLE存储精确浮点数

